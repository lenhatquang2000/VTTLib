VTTLib SYSTEM DEVELOPMENT LOG
=====================================
Start Date: January 13, 2026

1. AUTHENTICATION SYSTEM
-------------------------------------
- Secret login route: /topsecret/login (Route name: login).
- Controller: SecretLoginController handles Login/Logout.
- Interface: Designed with "Secret System" style (Dark mode, Glassmorphism, JetBrains Mono font).
- Default admin account (Seeder): 
    + Email: agent@vttlib.com
    + Pass: password

2. DATABASE & CONFIGURATION
--------------------------------------
- Switched connection from SQLite to MySQL (Database: vttulib).
- Performed Database Seeding for User and Metadata tables.

3. DYNAMIC METADATA MANAGEMENT
-----------------------------------------------
Flexible database model allowing unlimited metadata:
- metadata table: Defines record names (Code, Name, Description).
- metadata_values table: Stores sub-items (values) for each metadata.
- books table: Stores basic book information.
- book_metadata_value table: Many-to-Many relationship between Books and Metadata.

Completed functions:
- Controller: Admin/MetadataController.
- Admin UI: Visual management for adding/deleting Metadata and Metadata Values.
- Sidebar: Integrated Metadata menu into the Admin dashboard.

4. UI/UX
--------------------
- Header: Automatically displays "Hi, [Name]" and Logout button when logged in.
- Admin Layout: Professional Dashboard with sidebar and dynamic User info.

5. LOCALIZATION
---------------------------
- System supports switching between Vietnamese (VI) and English (EN).
- Middleware: SetLocale automatically identifies language from Session.
- Controller: LanguageController handles saving user-selected language.
- Interface: Integrated VI/EN buttons on both Client and Admin layouts.
- Translation: Managed via lang/vi.json and lang/en.json files.
- Used __() function in Blade to display content according to selected language.

6. DUAL LOGIN SYSTEM
----------------------------------------
- Client Login: /login (Route name: login). Redirects to homepage / after successful login.
- Agent Login: /topsecret/login (Route name: agent.login). Redirects to Agent Dashboard at /topsecret/dashboard after successful login.
- Agent folder structure: Moved all prefixes from /admin to /topsecret (e.g., /topsecret/dashboard, /topsecret/metadata).
- Ensured 100% of text on Login pages uses __() function for full multi-language support.

7. ROLE-BASED ACCESS CONTROL (RBAC)
------------------------------------------------
- New tables: roles (id, name, display_name) and role_user (pivot).
- Default Roles: admin, visitor.
- Middleware: EnsureHasRole (alias: role).
- Permission check:
    + Route /topsecret/*: Only allows User with admin role. Otherwise returns 403.
    + Default User agent@vttlib.com has been assigned admin role.
    + Users created via Factory are assigned visitor role by default.
- User Model: Added hasRole() method for quick permission checking.

8. BOOK DISTRIBUTION (ITEM MANAGEMENT)
------------------------------------------------
- Table: `book_items` stores physical copies of bibliographic records.
- Fields: Barcode, Accession Number, Storage Type, Location, Shelf, Status, etc.
- Multi-language Support: All labels in the distribution interface are translated using `__()`.
- Controller: `BookDistributionController` manages item creation and listing.
- UI: Two-column layout with a sleek add-item form and a data table for existing items.

9. DEPLOYMENT & DOCKER
------------------------------------------------
- Dockerfile: Multi-stage build (Composer -> Node/Vite -> Apache/PHP).
- Optimizations: Automatic configuration, route, and view caching on startup.
- .dockerignore: Excludes unnecessary files to reduce image size.

